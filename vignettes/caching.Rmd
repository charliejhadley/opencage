---
title: "Caching OpenCage Results"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{caching}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(opencage)
```

It's extremely common when working with geocoding datasets to either purposefully or accidentally make the same API requests multiple times in on session. `{opencage}` makes use of the `{memoise}` package to prevent unnecessary repeat API calls:

```{r memoise, message=FALSE}
system.time(oc_reverse(latitude = 10, longitude = 10))

system.time(oc_reverse(latitude = 10, longitude = 10))
```

To clear the cache of all results, either start a new R session or call `memoise::forget(opencage:::oc_get_memoise)`.

```{r forget, message=FALSE}
memoise::forget(opencage:::oc_get_memoise)
system.time(oc_reverse(latitude = 10, longitude = 10))
```

Note that while OpenCage depends on OpenStreeMap that averages [several million edits per day](https://wiki.openstreetmap.org/wiki/Stats) they update their sources [daily](https://opencagedata.com/faq).
